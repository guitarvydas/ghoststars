<!DOCTYPE html>
<html>
  <head>
    <style>
      textarea {
      }
    </style>
  </head>
  <body>

    <h1>Simplistic Transpile Demo</h1>

    <button onclick="testgs ()">Test Game Language (Ghost Stars)</button>
    <br>

    <p>source:</p>
    <textarea id="src" rows="7" cols="90" placeholder="src" style="background-color:oldlace;">
    </textarea>


    <p>transpiled:</p>
    <textarea id="output" rows="7" cols="90" placeholder="transpiled"  readonly style="background-color:whitesmoke;">
    </textarea>
    <br>
    <br>
    <p id="status" > READY </p>
    <br>
    <br>
    <br>

    <!-- Ohm-JS -->
    <script src="https://unpkg.com/ohm-js@16/dist/ohm.min.js"></script>


    <!-- Transpiler -->
    <script src="fmt-js/fmt-js.js"></script>
    <script src="fmt-js/transpile.js"></script>



    <script src="src.js"></script>
    <script src="grammar.js"></script>
    <script src="fabricate.js"></script>

    <script>
      function test (src, grammarName, grammar, fmt) {
	  document.getElementById('src').innerHTML = src;
	  [success, transpiled, errormessage] = transpile (src, grammarName, grammar, fmt, ohm, compilefmt);
	  if (success) {
	      document.getElementById('output').value = transpiled;
	      document.getElementById('status').innerHTML = "OK";
	  } else {
	      document.getElementById('output').value = transpiled;
	      document.getElementById('status').innerHTML = "FAILED " + errormessage;
	  }
      }

      function testgs () {
	  test (gamescript, "GhostStars", ghostStarsGrammar, fmt);
      }

	  document.getElementById('src').innerHTML = '';
	  document.getElementById('output').innerHTML = '';
      
    </script>
  </body>
</html>



